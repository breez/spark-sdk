<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" type="image/svg+xml" href="/vite.svg" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Breez SDK Spark - Web Demo</title>
  </head>
  <body>
    <div id="app">
      <header>
        <h1>âš¡ Breez SDK Spark Demo</h1>
        <p>Web demo for the Breez SDK Spark WASM package</p>
      </header>

      <main>
        <!-- Connection Status -->
        <section class="status-section">
          <h2>Connection Status</h2>
          <div id="connection-status" class="status-indicator">
            <span class="status-dot" id="status-dot"></span>
            <span id="status-text">Disconnected</span>
          </div>
          <button id="connect-btn" class="primary-btn">Connect Wallet</button>
          <button id="disconnect-btn" class="secondary-btn" style="display: none;">Disconnect</button>
        </section>

        <!-- Wallet Info -->
        <section class="wallet-section" id="wallet-info" style="display: none;">
          <h2>Wallet Information</h2>
          <div class="info-grid">
            <div class="info-item">
              <label>Balance:</label>
              <span id="balance">0 sats</span>
            </div>
          </div>
          <button id="sync-btn" class="secondary-btn">Sync Wallet</button>
        </section>

        <!-- Actions -->
        <section class="actions-section" id="actions" style="display: none;">
          <h2>Actions</h2>
          <div class="action-buttons">
            <button id="receive-btn" class="primary-btn">Receive Payment</button>
            <button id="send-btn" class="primary-btn">Send Payment</button>
            <button id="lnurl-pay-btn" class="primary-btn">LNURL Pay</button>
          </div>
        </section>

        <!-- Payments List -->
        <section class="payments-section" id="payments-section" style="display: none;">
          <h2>Recent Payments</h2>
          <div id="payments-list" class="payments-list">
            <!-- Payments will be loaded here -->
          </div>
        </section>

        <!-- Modals -->
        <div id="receive-modal" class="modal" style="display: none;">
          <div class="modal-content">
            <h3>Receive Payment</h3>
            <div class="form-group">
              <label for="payment-method">Payment Method:</label>
              <select id="payment-method">
                <option value="bolt11Invoice">BOLT11 Invoice</option>
                <option value="bitcoinAddress">Bitcoin Address</option>
                <option value="sparkAddress">Spark Address</option>
              </select>
            </div>
            <div id="bolt11-fields">
              <div class="form-group">
                <label for="description">Description:</label>
                <input type="text" id="description" placeholder="Payment description">
              </div>
              <div class="form-group">
                <label for="amount">Amount (sats, optional):</label>
                <input type="number" id="amount" placeholder="Amount in satoshis">
              </div>
            </div>
            <div class="modal-actions">
              <button id="prepare-receive-btn" class="primary-btn">Prepare</button>
              <button id="cancel-receive-btn" class="secondary-btn">Cancel</button>
            </div>
            <div id="receive-result" style="display: none;">
              <h4>Payment Request Generated</h4>
              <div id="qr-code"></div>
              <div class="form-group">
                <label>Payment Request:</label>
                <textarea id="payment-request" readonly></textarea>
                <button id="copy-payment-request" class="secondary-btn">Copy</button>
              </div>
            </div>
          </div>
        </div>

        <div id="send-modal" class="modal" style="display: none;">
          <div class="modal-content">
            <h3>Send Payment</h3>
            <div class="form-group">
              <label for="payment-request-input">Payment Request:</label>
              <textarea id="payment-request-input" placeholder="Paste BOLT11 invoice, Bitcoin address, or Spark address"></textarea>
            </div>
            <div class="form-group">
              <label for="send-amount">Amount (sats, optional):</label>
              <input type="number" id="send-amount" placeholder="Amount in satoshis">
            </div>
            <div class="modal-actions">
              <button id="prepare-send-btn" class="primary-btn">Prepare</button>
              <button id="cancel-send-btn" class="secondary-btn">Cancel</button>
            </div>
            <div id="send-confirmation" style="display: none;">
              <h4>Confirm Payment</h4>
              <div class="confirmation-details">
                <div class="detail-item">
                  <label>Amount:</label>
                  <span id="confirm-amount">0 sats</span>
                </div>
                <div class="detail-item">
                  <label>Fee:</label>
                  <span id="confirm-fee">0 sats</span>
                </div>
              </div>
              <div class="modal-actions">
                <button id="confirm-send-btn" class="primary-btn">Send Payment</button>
                <button id="cancel-confirm-btn" class="secondary-btn">Cancel</button>
              </div>
            </div>
          </div>
        </div>

        <div id="lnurl-pay-modal" class="modal" style="display: none;">
          <div class="modal-content">
            <h3>LNURL Pay</h3>
            <div class="form-group">
              <label for="lnurl-input">LNURL or Lightning Address:</label>
              <textarea id="lnurl-input" placeholder="Paste LNURL or lightning address (e.g., user@domain.com)"></textarea>
            </div>
            <div class="form-group">
              <label for="lnurl-comment">Comment (optional):</label>
              <input type="text" id="lnurl-comment" placeholder="Payment comment">
            </div>
            <div id="lnurl-amount-section" style="display: none;">
              <div class="form-group">
                <label for="lnurl-amount">Amount (sats):</label>
                <input type="number" id="lnurl-amount" placeholder="Amount in satoshis">
                <small id="lnurl-amount-range" class="form-help"></small>
              </div>
            </div>
            <div class="modal-actions">
              <button id="prepare-lnurl-btn" class="primary-btn">Prepare</button>
              <button id="cancel-lnurl-btn" class="secondary-btn">Cancel</button>
            </div>
            <div id="lnurl-confirmation" style="display: none;">
              <h4>Confirm LNURL Payment</h4>
              <div class="confirmation-details">
                <div class="detail-item">
                  <label>Amount:</label>
                  <span id="lnurl-confirm-amount">0 sats</span>
                </div>
                <div class="detail-item">
                  <label>Fee:</label>
                  <span id="lnurl-confirm-fee">0 sats</span>
                </div>
                <div class="detail-item" id="lnurl-confirm-comment-section" style="display: none;">
                  <label>Comment:</label>
                  <span id="lnurl-confirm-comment"></span>
                </div>
              </div>
              <div class="modal-actions">
                <button id="confirm-lnurl-btn" class="primary-btn">Send Payment</button>
                <button id="cancel-lnurl-confirm-btn" class="secondary-btn">Cancel</button>
              </div>
            </div>
          </div>
        </div>

        <!-- Loading overlay -->
        <div id="loading-overlay" class="loading-overlay" style="display: none;">
          <div class="loading-spinner"></div>
          <p id="loading-text">Loading...</p>
        </div>
      </main>
    </div>

    <script type="module" src="/src/main.js"></script>
  </body>
</html>